{
  "info": {
    "name": "Worker Productivity Dashboard - Full API Collection",
    "_postman_id": "0c0e6d67-collection-full",
    "description": "Full set of backend endpoints for the Worker Productivity Dashboard. Set {{baseUrl}} to http://localhost:4000",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "01 - POST /api/setup-db (apply migrations)",
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/setup-db",
          "host": ["{{baseUrl}}"],
          "path": ["api", "setup-db"]
        }
      }
    },
    {
      "name": "02 - POST /api/seed?size=medium (seed ~300)",
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/seed?size=medium",
          "host": ["{{baseUrl}}"],
          "path": ["api", "seed"],
          "query": [{"key":"size","value":"medium"}]
        }
      }
    },
    {
      "name": "03 - GET /api/debug/counts",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/debug/counts",
          "host": ["{{baseUrl}}"],
          "path": ["api", "debug", "counts"]
        }
      }
    },
    {
      "name": "04 - GET /api/health",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/health",
          "host": ["{{baseUrl}}"],
          "path": ["api", "health"]
        }
      }
    },
    {
      "name": "05 - POST /api/events (insert newer event - not late)",
      "request": {
        "method": "POST",
        "header": [{"key":"Content-Type","value":"application/json"}],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"timestamp\": \"2026-01-15T18:00:00Z\",\n  \"worker_id\": \"W1\",\n  \"workstation_id\": \"S1\",\n  \"event_type\": \"working\",\n  \"confidence\": 0.95\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/events",
          "host": ["{{baseUrl}}"],
          "path": ["api", "events"]
        }
      }
    },
    {
      "name": "06 - POST /api/events (insert older event - late)",
      "request": {
        "method": "POST",
        "header": [{"key":"Content-Type","value":"application/json"}],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"timestamp\": \"2026-01-15T08:30:00Z\",\n  \"worker_id\": \"W1\",\n  \"workstation_id\": \"S1\",\n  \"event_type\": \"idle\",\n  \"confidence\": 0.9\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/events",
          "host": ["{{baseUrl}}"],
          "path": ["api", "events"]
        }
      }
    },
    {
      "name": "07 - POST /api/events/bulk (mixed valid/invalid/late)",
      "request": {
        "method": "POST",
        "header": [{"key":"Content-Type","value":"application/json"}],
        "body": {
          "mode": "raw",
          "raw": "[\n  {\n    \"timestamp\": \"2026-01-15T19:00:00Z\",\n    \"worker_id\": \"W2\",\n    \"workstation_id\": \"S2\",\n    \"event_type\": \"working\",\n    \"confidence\": 0.9\n  },\n  {\n    \"timestamp\": \"2026-01-15T07:45:00Z\",\n    \"worker_id\": \"W2\",\n    \"workstation_id\": \"S2\",\n    \"event_type\": \"idle\",\n    \"confidence\": 0.85\n  },\n  {\n    \"timestamp\": \"bad-date\",\n    \"worker_id\": \"W3\",\n    \"workstation_id\": \"S3\",\n    \"event_type\": \"working\"\n  }\n]"
        },
        "url": {
          "raw": "{{baseUrl}}/api/events/bulk",
          "host": ["{{baseUrl}}"],
          "path": ["api", "events", "bulk"]
        }
      }
    },
    {
      "name": "08 - GET /api/recompute/pending (view pending recompute queue)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/recompute/pending",
          "host": ["{{baseUrl}}"],
          "path": ["api", "recompute", "pending"]
        }
      }
    },
    {
      "name": "09 - POST /api/metrics/recompute (process pending recomputes)",
      "request": {
        "method": "POST",
        "header": [{"key":"Content-Type","value":"application/json"}],
        "body": {
          "mode": "raw",
          "raw": "{ \"limit\": 50 }"
        },
        "url": {
          "raw": "{{baseUrl}}/api/metrics/recompute",
          "host": ["{{baseUrl}}"],
          "path": ["api", "metrics", "recompute"]
        }
      }
    },
    {
      "name": "10 - GET /api/metrics/worker/:id (live compute)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/metrics/worker/W1?start=2026-01-15T09:00:00Z&end=2026-01-15T17:00:00Z",
          "host": ["{{baseUrl}}"],
          "path": ["api", "metrics", "worker", "W1"],
          "query": [
            {"key":"start","value":"2026-01-15T09:00:00Z"},
            {"key":"end","value":"2026-01-15T17:00:00Z"}
          ]
        }
      }
    },
    {
      "name": "11 - GET /api/metrics/workstation/:id (live compute)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/metrics/workstation/S1?start=2026-01-15T09:00:00Z&end=2026-01-15T17:00:00Z",
          "host": ["{{baseUrl}}"],
          "path": ["api", "metrics", "workstation", "S1"],
          "query": [
            {"key":"start","value":"2026-01-15T09:00:00Z"},
            {"key":"end","value":"2026-01-15T17:00:00Z"}
          ]
        }
      }
    },
    {
      "name": "12 - GET /api/metrics/factory (live compute)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/metrics/factory?start=2026-01-15T09:00:00Z&end=2026-01-15T17:00:00Z",
          "host": ["{{baseUrl}}"],
          "path": ["api", "metrics", "factory"],
          "query": [
            {"key":"start","value":"2026-01-15T09:00:00Z"},
            {"key":"end","value":"2026-01-15T17:00:00Z"}
          ]
        }
      }
    },
    {
      "name": "13 - GET /api/metrics/cache/worker/:id (cache-read, populate=false)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/metrics/cache/worker/W1?start=2026-01-15T09:00:00Z&end=2026-01-15T17:00:00Z",
          "host": ["{{baseUrl}}"],
          "path": ["api", "metrics", "cache", "worker", "W1"],
          "query": [
            {"key":"start","value":"2026-01-15T09:00:00Z"},
            {"key":"end","value":"2026-01-15T17:00:00Z"}
          ]
        }
      }
    },
    {
      "name": "14 - GET /api/metrics/cache/worker/:id (cache-read & populate=true)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/metrics/cache/worker/W1?start=2026-01-15T09:00:00Z&end=2026-01-15T17:00:00Z&populate=true",
          "host": ["{{baseUrl}}"],
          "path": ["api", "metrics", "cache", "worker", "W1"],
          "query": [
            {"key":"start","value":"2026-01-15T09:00:00Z"},
            {"key":"end","value":"2026-01-15T17:00:00Z"},
            {"key":"populate","value":"true"}
          ]
        }
      }
    },
    {
      "name": "15 - GET /api/metrics/cache/workstation/:id (populate=true)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/metrics/cache/workstation/S1?start=2026-01-15T09:00:00Z&end=2026-01-15T17:00:00Z&populate=true",
          "host": ["{{baseUrl}}"],
          "path": ["api", "metrics", "cache", "workstation", "S1"],
          "query": [
            {"key":"start","value":"2026-01-15T09:00:00Z"},
            {"key":"end","value":"2026-01-15T17:00:00Z"},
            {"key":"populate","value":"true"}
          ]
        }
      }
    },
    {
      "name": "16 - GET /api/metrics/cache/factory (populate=true)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/metrics/cache/factory?start=2026-01-15T09:00:00Z&end=2026-01-15T17:00:00Z&populate=true",
          "host": ["{{baseUrl}}"],
          "path": ["api", "metrics", "cache", "factory"],
          "query": [
            {"key":"start","value":"2026-01-15T09:00:00Z"},
            {"key":"end","value":"2026-01-15T17:00:00Z"},
            {"key":"populate","value":"true"}
          ]
        }
      }
    },
    {
      "name": "17 - GET /api/recompute/pending (verify done/pending after recompute)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/recompute/pending",
          "host": ["{{baseUrl}}"],
          "path": ["api", "recompute", "pending"]
        }
      }
    },
    {
      "name": "18 - GET /debug-sentry (test Sentry error capture)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/debug-sentry",
          "host": ["{{baseUrl}}"],
          "path": ["debug-sentry"]
        }
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:4000"
    }
  ]
}